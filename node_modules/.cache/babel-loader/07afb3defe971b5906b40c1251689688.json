{"ast":null,"code":"import _toConsumableArray from\"/Users/timurito/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/timurito/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Header from'./Header.js';import Main from'./Main.js';import Footer from'./Footer.js';import PopupWithForm from'./PopupWithForm.js';import{useState,useEffect}from'react';import ImagePopup from'./ImagePopup';import{CurrentUserContext}from'../contexts/CurrentUserContext.js';import api from'../utils/Api.js';import EditProfilePopup from'./EditProfilePopup.js';import EditAvatarPopup from'./EditAvatarPopup.js';import AddPlacePopup from'./AddPlacePopup.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfilePopupOpen=_useState2[0],setIsEditProfilePopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddPlacePopupOpen=_useState4[0],setIsAddPlacePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditAvatarPopupOpen=_useState6[0],setIsEditAvatarPopupOpen=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),selectedCard=_useState8[0],setSelectedCard=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),currentUser=_useState10[0],setCurrentUser=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cards=_useState12[0],setCards=_useState12[1];function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleCardClick(card){setSelectedCard(card);}function closeAllPopup(){setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsEditAvatarPopupOpen(false);setSelectedCard({});}function handleUpdateAvatar(e){api.addNewAvatar(e).then(function(res){setCurrentUser(res);closeAllPopup();}).catch(function(res){console.log(res);});}function handleUpdateUser(e){api.setUserInfo(e.name,e.about).then(function(res){setCurrentUser(res);closeAllPopup();}).catch(function(res){console.log(res);});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(res){console.log(res);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});}).catch(function(res){console.log(res);});}function handleAddPlaceSubmit(name,link){api.addNewCard(name,link).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopup();}).catch(function(res){console.log(res);});}useEffect(function(){api.getCards().then(function(res){setCards(res);}).catch(function(err){console.log(err);});},[]);useEffect(function(){api.getUserInfo().then(function(e){setCurrentUser(e);}).catch(function(err){console.log(err);});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,cards:cards,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopup,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopup,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopup,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopup}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"delete\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",textButton:\"\\u0414\\u0430\"})]})});}export default App;","map":{"version":3,"names":["Header","Main","Footer","PopupWithForm","useState","useEffect","ImagePopup","CurrentUserContext","api","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleCardClick","card","closeAllPopup","handleUpdateAvatar","e","addNewAvatar","then","res","catch","console","log","handleUpdateUser","setUserInfo","name","about","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","state","map","c","handleCardDelete","deleteCard","filter","handleAddPlaceSubmit","link","addNewCard","getCards","err","getUserInfo"],"sources":["/Users/timurito/dev/mesto-react/src/components/App.js"],"sourcesContent":["import Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport { useState, useEffect } from 'react';\nimport ImagePopup from './ImagePopup';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport api from '../utils/Api.js'\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\n\nfunction App() {\n\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n    const [selectedCard, setSelectedCard] = useState({});\n    const [currentUser, setCurrentUser] = useState({});\n    const [cards, setCards] = useState([]);\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true);\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    function handleCardClick(card) {\n        setSelectedCard(card)\n    }\n\n    function closeAllPopup() {\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setIsEditAvatarPopupOpen(false);\n        setSelectedCard({})\n    }\n\n    function handleUpdateAvatar(e) {\n        api.addNewAvatar(e)\n            .then((res) => {\n                setCurrentUser(res);\n                closeAllPopup();\n            })\n            .catch((res) => {\n                console.log(res);\n            })\n    }\n\n    function handleUpdateUser(e) {\n        api.setUserInfo(e.name, e.about)\n            .then((res) => {\n                setCurrentUser(res);\n                closeAllPopup();\n            })\n            .catch((res) => {\n                console.log(res);\n            })\n    }\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n        api.changeLikeCardStatus(card._id, !isLiked)\n            .then((newCard) => {\n                setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n            })\n            .catch((res) => {\n                console.log(res);\n            })\n    }\n\n    function handleCardDelete(card) {\n        api.deleteCard(card._id)\n            .then(() => {\n                setCards((state) => state.filter((c) => c._id !== card._id));\n            })\n            .catch((res) => {\n                console.log(res);\n            })\n    }\n\n    function handleAddPlaceSubmit(name, link) {\n        api.addNewCard(name, link)\n            .then((newCard) => {\n                setCards([newCard, ...cards]);\n                closeAllPopup();\n            })\n            .catch((res) => {\n                console.log(res);\n            })\n    }\n\n    useEffect(() => {\n        api.getCards()\n            .then((res) => {\n                setCards(res);\n            })\n            .catch(err => {\n                console.log(err);\n            })\n    }, []);\n\n    useEffect(() => {\n        api.getUserInfo()\n            .then((e) => {\n                setCurrentUser(e);\n            })\n            .catch(err => {\n                console.log(err);\n            })\n    }, []);\n\n    return (\n        <div className=\"app\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <Header />\n                <Main onEditProfile={handleEditProfileClick}\n                    onAddPlace={handleAddPlaceClick}\n                    onEditAvatar={handleEditAvatarClick}\n                    cards={cards}\n                    onCardClick={handleCardClick}\n                    onCardLike={handleCardLike}\n                    onCardDelete={handleCardDelete} />\n                <Footer />\n\n                <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopup} onUpdateUser={handleUpdateUser} />\n\n                <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopup} onUpdateAvatar={handleUpdateAvatar} />\n\n                <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopup} onAddPlace={handleAddPlaceSubmit} />\n\n                <ImagePopup card={selectedCard} onClose={closeAllPopup} />\n\n                <PopupWithForm name='delete' title='Вы уверены?' textButton='Да' />\n\n\n            </CurrentUserContext.Provider>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}